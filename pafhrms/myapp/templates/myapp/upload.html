

{% extends 'Base/base.html' %}
{% block content %}
<div class="form-row">  
    <div class="col-12 col-xl-4">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <h6 class="mb-0">UPLOAD PERSONNEL DATA</h6>
        </div>
        <div class="card-body p-3">
            <p class="text-sm">
                Upload the excel file template of "Personnel Data" here. <span class="text-primary customTextTheme">You only need to do it once</span>
            </p>
            <div class="form-group">
                <form method="post" enctype="multipart/form-data" action="{% url 'upload_excel' %}" class="novalidate">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="bg-white p-5 rounded shadow-sm border">
                            <div class="dropzone d-block mb-4">
                                <label for="unique-file" class="dropzone-container">
                                    <div class="file-icon file-empty"><i class="fas fa-upload text-primary customTextTheme"></i></div>
                                    <div class="file-icon file-attached"><i class="fas fa-file-excel text-primary customTextTheme"></i></div>
                                    <div class="text-center">
                                        <p class="px-4 h5 text-dark fw-bold file-empty"><span class="text-primary customTextTheme">CLICK HERE</span> to attach the Excel File, then click Upload Now</p> 
                                        <p class="px-4 h5 text-dark fw-bold file-attached">Excel File attached. Please click Upload Now.</p> 
                                    </div>
                                </label>
                                <input type="file" name="excel_file" id="unique-file" class="file-input" required>
                            </div>
                            <div class="form-group" id="unique-file-attachment"></div>
                            <button type="submit" class="btn bg-gradient-primary btn-block customBGTheme">Upload Now</button>
                        </div>    
                    </div>
                </form>
            </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-xl-4">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <h6 class="mb-0">UPLOAD UNIT DATA</h6>
        </div>
        <div class="card-body p-3">
            <p class="text-sm">
                Upload the excel file template of "Unit Data" here. <span class="text-primary customTextTheme">You only need to do it once</span>
            </p>
            <div class="form-group">
                <form method="post" enctype="multipart/form-data" action="{% url 'table_Units_upload' %}" class="novalidate">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="bg-white p-5 rounded shadow-sm border">
                            <div class="dropzone d-block mb-4">
                                <label for="unique-file-for-units" class="dropzone-container">
                                    <div class="file-icon file-empty"><i class="fas fa-upload text-primary customTextTheme"></i></div>
                                    <div class="file-icon file-attached"><i class="fas fa-file-excel text-primary customTextTheme"></i></div>
                                    <div class="text-center">
                                        <p class="px-4 h5 text-dark fw-bold file-empty"><span class="text-primary customTextTheme">CLICK HERE</span> to attach the Excel File, then click Upload Now</p> 
                                        <p class="px-4 h5 text-dark fw-bold file-attached">Excel File attached. Please click Upload Now.</p> 
                                    </div>
                                </label>
                                <input type="file" name="excel_file" id="unique-file-for-units" class="file-input" required>
                            </div>
                            <div class="form-group" id="unique-file-attachment-for-units"></div>
                            <button type="submit" class="btn bg-gradient-primary btn-block customBGTheme">Upload Now</button>
                        </div>    
                    </div>
                </form>
            </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-xl-4">
      <div class="card h-100">
        <div class="card-header pb-0 p-3">
          <h6 class="mb-0">UPLOAD AFSC DATA</h6>
        </div>
        <div class="card-body p-3">
            <p class="text-sm">
                Upload the excel file template of "AFSC Data" here. <span class="text-primary customTextTheme">You only need to do it once</span>
            </p>
            <div class="form-group">
                <form method="post" enctype="multipart/form-data" action="{% url 'upload_afsc' %}" class="novalidate">
                    {% csrf_token %}
                    <div class="form-group">
                        <div class="bg-white p-5 rounded shadow-sm border">
                            <div class="dropzone d-block mb-4">
                                <label for="unique-file" class="dropzone-container">
                                    <div class="file-icon file-empty"><i class="fas fa-upload text-primary customTextTheme"></i></div>
                                    <div class="file-icon file-attached"><i class="fas fa-file-excel text-primary customTextTheme"></i></div>
                                    <div class="text-center">
                                        <p class="px-4 h5 text-dark fw-bold file-empty"><span class="text-primary customTextTheme">CLICK HERE</span> to attach the Excel File, then click Upload Now</p> 
                                        <p class="px-4 h5 text-dark fw-bold file-attached">Excel File attached. Please click Upload Now.</p> 
                                    </div>
                                </label>
                                <input type="file" name="excel_file" id="unique-file-for-afsc" class="file-input" required>
                            </div>
                            <div class="form-group" id="unique-file-attachment-for-afsc"></div>
                            <button type="submit" class="btn bg-gradient-primary btn-block customBGTheme">Upload Now</button>
                        </div>    
                    </div>
                </form>
            </div>
        </div>
      </div>
    </div>
  </div>
<script>
    function ToogleDefaultUploadUI(uploadElem){
        $('.file-err-msg').empty();
        $('.file-attached').hide();
        $('.file-empty').show();
    }

    function ToogleOnUploadUI(uploadElem){

        uploadElem.closest('div').find('.file-empty').hide();
        uploadElem.closest('div').find('.file-attached').show();
    }

    function ToogleOffUploadUI(uploadElem){
        uploadElem.closest('div').find('.file-err-msg').empty();
        uploadElem.closest('div').find('.file-attached').hide();
        uploadElem.closest('div').find('.file-empty').show();
    }
    

    $(document).ready(function() {
        ToogleDefaultUploadUI();
        $("#unique-file").on("change",function() {
            $("#unique-file-file-err-msg").empty();
            $("#unique-file-attachment").empty();
            var fileLen = $(this)[0].files.length;
            if(!(fileLen == 0)){
              var filename = $(this).val().replace(/.*(\/|\\)/, '');;  
                $("#unique-file-attachment").append('<div class="alert alert-success text-left text-white" role="alert"><div class="row"><div class="col-2"><i class="fas fa-file-excel fa-2x text-white"></i></div><div class="col-10">'+filename+'</div></div></div>');
                ToogleOnUploadUI($(this));
            }else{
                ToogleOffUploadUI($(this));
            }
        });
    });



    $(document).ready(function() {
        ToogleDefaultUploadUI();
        $("#unique-file-for-units").on("change",function() {
            $("#unique-file-file-err-msg").empty();
            $("#unique-file-attachment-for-units").empty();
            var fileLen = $(this)[0].files.length;
            if(!(fileLen == 0)){
              var filename = $(this).val().replace(/.*(\/|\\)/, '');;  
                $("#unique-file-attachment-for-units").append('<div class="alert alert-success text-left text-white" role="alert"><div class="row"><div class="col-2"><i class="fas fa-file-excel fa-2x text-white"></i></div><div class="col-10">'+filename+'</div></div></div>');
                ToogleOnUploadUI($(this));
            }else{
                ToogleOffUploadUI($(this));
            }
        });
    });


    $(document).ready(function() {
        ToogleDefaultUploadUI();
        $("#unique-file-for-afsc").on("change",function() {
            $("#unique-file-file-err-msg").empty();
            $("#unique-file-attachment-for-afsc").empty();
            var fileLen = $(this)[0].files.length;
            if(!(fileLen == 0)){
              var filename = $(this).val().replace(/.*(\/|\\)/, '');;  
                $("#unique-file-attachment-for-afsc").append('<div class="alert alert-success text-left text-white" role="alert"><div class="row"><div class="col-2"><i class="fas fa-file-excel fa-2x text-white"></i></div><div class="col-10">'+filename+'</div></div></div>');
                ToogleOnUploadUI($(this));
            }else{
                ToogleOffUploadUI($(this));
            }
        });
    });






</script>
{% endblock %}
