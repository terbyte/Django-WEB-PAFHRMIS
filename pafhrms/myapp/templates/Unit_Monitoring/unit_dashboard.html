{% extends 'Base/base.html' %}
{% block content %}
    <ul class="nav nav-pills mb-3" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="tab-guas" data-toggle="tab" href="#tabpanel-guas" role="tab">GUAS</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="tab-pafhrmc" data-toggle="tab" href="#tabpanel-pafhrmc" role="tab">PAFHRMC A/U</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="tab-allunits" data-toggle="tab" href="#tabpanel-allunits" role="tab" >ALL UNITS</a>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="tabpanel-guas" role="tabpanel">
            <table class="table">
                <thead>
                    <tr>
                        <th rowspan="4" colspan="1">UNIT</th>
                        <th colspan="2">ACTUAL</th>
                        <th colspan="3"></th>
                    </tr>
                    <tr>
                        <th>OFFICER</th>
                        <th>ENLISTED PERSONNEL</th>
                        <th>DS / TDY</th>
                        <th>TOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    {% for unit in GUAS_units %}
                    <tr>
                        <td>{{ unit }}</td>
                        <td>
                            {% for count in GUAS_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.officers_count }}
                                {% endif %}
                            {% endfor %}

                            
                        </td>
                        <td>
                            {% for count in GUAS_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.enlisted_count }}
                                {% endif %}
                            {% endfor %}
                        </td>

                        <td>
                            {% for count in GUAS_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.detached_service_count }} / {{ count.temporary_duty_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>
                            {% for count in GUAS_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.officers_count|add:count.enlisted_count|add:count.detached_service_count|add:count.temporary_duty_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="tabpanel-pafhrmc" role="tabpanel" >
            <table class="table">
                <thead>
                    <tr>
                        <th>UNIT</th>
                        <th>Officers Count</th>
                        <th>Enlisted Count</th>
                    </tr>
                </thead>
                <tbody>
                    {% for unit in PAFHRMC_au %}
                    <tr>
                        <td>{{ unit }}</td>
                        <td>
                            {% for count in PAFHRMC_au_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.officers_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>
                            {% for count in PAFHRMC_au_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.enlisted_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="tab-pane fade" id="tabpanel-allunits" role="tabpanel">
            <table class="table">
                <thead>
                    <tr>
                        <th>UNIT</th>
                        <th>Officers Count</th>
                        <th>Enlisted Count</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for unit in ALLPAF_units %}
                    <tr>
                        <td>{{ unit }}</td>
                        <td>
                            {% for count in ALLPAF_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.officers_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                        <td>
                            {% for count in ALLPAF_unit_counts %}
                                {% if count.UNIT == unit %}
                                    {{ count.enlisted_count }}
                                {% endif %}
                            {% endfor %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
      </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var card = document.querySelector('.card');
            var cardBody = card.querySelector('.card-body');
            var btnTool = card.querySelector('.btn-tool');

            // Check if the card is initially collapsed or not
            if (card.classList.contains('collapsed')) {
                cardBody.style.height = '0';
                cardBody.style.paddingTop = '0';
                cardBody.style.paddingBottom = '0';
            } else {
                cardBody.style.height = cardBody.scrollHeight + 'px';
            }
        });

        function toggleCollapse(header) {
            var card = header.closest('.card');
            var cardBody = card.querySelector('.card-body');
            var btnTool = card.querySelector('.btn-tool');

            // Toggle the 'collapsed' class on the card and update the button icon
            card.classList.toggle('collapsed');
            btnTool.classList.toggle('collapsed');
            var isOpen = !card.classList.contains('collapsed');
            if (isOpen) {
                cardBody.style.height = cardBody.scrollHeight + 'px';
                cardBody.style.paddingTop = '';
                cardBody.style.paddingBottom = '';
            } else {
                cardBody.style.height = '0';
                cardBody.style.paddingTop = '0';
                cardBody.style.paddingBottom = '0';
            }
        }
    </script>

{% endblock %}
